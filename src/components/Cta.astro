---
import Upheading from './Upheading.astro'
import WhatsAppButton from './WhatsAppButton.astro'

interface Props {
  upheading?: string
  heading: string
  text: string
  layout?: 'side-by-side' | 'centered'
  primaryCtaText: string
  secondaryCtaText?: string
  secondaryCtaHref?: string
  patternId?: string
}

const {
  upheading,
  heading,
  text,
  layout = 'side-by-side',
  primaryCtaText,
  secondaryCtaText,
  secondaryCtaHref,
  patternId = 'cta-dots-pattern',
} = Astro.props
---

<div class:list={['relative isolate bg-petrol-100', layout === 'centered' && 'px-6 lg:px-8']}>
  <svg
    aria-hidden='true'
    class='absolute inset-0 -z-10 size-full'>
    <defs>
      <pattern
        id={patternId}
        width='32'
        height='32'
        patternUnits='userSpaceOnUse'>
        <circle
          cx='16'
          cy='16'
          r='1.5'
          fill='currentColor'
          class='text-petrol-600/20'
        ></circle>
      </pattern>
    </defs>
    <rect
      width='100%'
      height='100%'
      fill={`url(#${patternId})`}
    ></rect>
  </svg>

  {layout === 'side-by-side' ? (
    <div
      class='mx-auto max-w-7xl px-6 py-24 sm:py-32 lg:flex lg:items-center lg:justify-between lg:px-8'>
      <div>
        {upheading && <Upheading as='h2' text={upheading} />}
        <p
          class='max-w-2xl text-4xl font-semibold tracking-tight text-petrol-900 sm:text-5xl text-pretty'>
          {heading}
        </p>
        <p class='mt-6 max-w-xl text-lg text-petrol-900'>
          <Fragment set:html={text} />
        </p>
      </div>
      <div
        class='mt-10 flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-x-6 lg:mt-0 lg:shrink-0'>
        <WhatsAppButton text={primaryCtaText} />
        {secondaryCtaText && secondaryCtaHref && (
          <a
            href={secondaryCtaHref}
            class='text-sm/6 font-semibold text-petrol-900'>
            {secondaryCtaText}
            <span aria-hidden='true'>→</span>
          </a>
        )}
      </div>
    </div>
  ) : (
    <div class='mx-auto max-w-2xl py-24 sm:py-32 text-center'>
      {upheading && <Upheading as='h2' text={upheading} class='text-center' />}
      <p
        class='mt-2 text-4xl font-semibold tracking-tight text-petrol-900 sm:text-5xl'>
        {heading}
      </p>
      <p class='mt-6 text-lg/8 text-petrol-900'>
        <Fragment set:html={text} />
      </p>
      <div
        class='mt-10 flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-x-6'>
        <WhatsAppButton text={primaryCtaText} />
        {secondaryCtaText && secondaryCtaHref && (
          <a
            href={secondaryCtaHref}
            class='text-sm/6 font-semibold text-petrol-900'>
            {secondaryCtaText} →
          </a>
        )}
      </div>
    </div>
  )}
</div>
